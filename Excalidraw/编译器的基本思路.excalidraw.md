---

excalidraw-plugin: parsed
tags: [excalidraw]

---
==⚠  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. ⚠== You can decompress Drawing data with the command palette: 'Decompress current Excalidraw file'. For more info check in plugin settings under 'Saving'


# Excalidraw Data
## Text Elements
代码生成 Code Generation ^MbOn3dhc

递归分析最终生成的AST，然后对于每种type都有个对应的函数处理。 ^bLu2SYJg

词法分析 Lexical Analysis ^PEVP7uN4

去掉注释、空格、回车等无效字符 ^KaiEvFtP

语法分析 Syntactic Analysis ^Z2rzCasX

通过词法分析器拿到的token流 + 结合文法规则，通过算法得到一颗抽象语法树(AST)。

典型应用： babel插件， es6代码 -> Babylon.parse -> AST -> babel-traverse -> 新的AST -> es5代码

解析算法： 
    1. 自顶向下：实现相对简单，范围也不错，一般的解析器都是采用这种深度优先索引的方式
    2. 自底向上：分析文法范围广、实现难度大 ^rQhU6zCK

代码转换 Transformation ^muFPyxSX

在得到AST后，我们一般会先将AST转为另一种AST，目的是生成更符合预期的AST，这一步称为代码转换。

代码转换的优势：主要是产生工程上的意义
    - 易移植：与机器无关，所以它作为中间语言可以为生成多种不同型号的目标机器码服务；
    - 机器无关优化：对中间码进行机器无关优化，利于提高代码质量；
    - 层次清晰：将AST映射成中间代码表示，再映射成目标代码的工作分层进行，使编译算法更加清晰 ；

转换阶段分2种： 同语言的AST转换，AST转换为新语言的AST。
    通用的做法：对之前的AST从上至下解析(traversal)，然后根据映射表(visitor)把对应的类型做相应的转换。 ^PcbtQJ8z

%%
## Drawing
```compressed-json
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
```
%%